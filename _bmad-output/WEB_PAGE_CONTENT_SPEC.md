# 飞牛影视 Web页面内容规格文档

## 📅 更新日期: 2024-12-23

## 🌐 页面结构概览

### 1. 侧边栏导航 (所有页面通用)
```
├── Logo: 飞牛影视
├── 首页
├── 收藏 (显示收藏数量)
├── 媒体库
│   ├── movie (显示数量)
│   ├── 夸克网盘 (显示数量)
│   └── zy影视 (显示数量)
└── 分类
    ├── 全部 (显示数量)
    ├── 电视节目 (显示数量)
    ├── 电影 (显示数量)
    └── 其他 (显示数量)
```

---

## 📄 页面详情

### 1. 首页 (`/v`)

**页面内容:**
- 继续观看列表 (横向滚动卡片)
- 各媒体库内容展示

**继续观看卡片内容:**
- 海报图片
- 标题
- 类型标签 (电影/电视节目)
- 进度信息 (第X季·第X集)

**媒体库卡片内容:**
- 海报图片
- 评分 (如 7.6)
- 标题
- 年份 或 集数信息 (共X集·年份)

**对应API:**
- `GET /v/api/v1/play/list` - 继续观看列表
- `GET /v/api/v1/mediadb/list` - 媒体库列表
- `POST /v/api/v1/item/list` - 各媒体库内容

---

### 2. 收藏页面 (`/v/favorite`)

**页面内容:**
- 标签切换: 全部 | 电影 | 电视节目 | 单集 | 人物
- 筛选按钮
- 排序: 收藏时间
- 总数显示: 共 X 项
- 收藏列表 (卡片形式)

**卡片内容:**
- 海报图片
- 评分
- 标题
- 年份/集数信息

**对应API:**
- `GET /v/api/v1/favorite/list` - 收藏列表

---

### 3. 媒体库页面 (`/v/library/{library_guid}`)

**页面内容:**
- 媒体库名称标题
- 筛选按钮
- 排序: 添加日期
- 总数显示: 共 X 项
- 媒体列表 (卡片网格)

**卡片内容:**
- 海报图片
- 评分 (如 7.6)
- 标题
- 年份 或 集数信息 (共X集·年份)

**对应API:**
- `POST /v/api/v1/item/list` - 媒体列表
  - 请求参数: `ancestor_guid`, `tags`, `sort_type`, `sort_column`, `page_size`

---

### 4. 分类列表页面 (`/v/list/{type}`)

**URL类型:**
- `/v/list/all` - 全部
- `/v/list/tv` - 电视节目
- `/v/list/movie` - 电影
- `/v/list/other` - 其他

**页面内容:**
- 分类名称标题
- 筛选按钮
- 排序: 添加日期
- 总数显示: 共 X 项
- 媒体列表 (卡片网格)

**卡片内容:**
- 海报图片
- 评分
- 标题
- 年份/集数信息

**对应API:**
- `POST /v/api/v1/item/list` - 媒体列表

---

### 5. 电视剧详情页 - TV层 (`/v/tv/{tv_guid}`)

**页面内容:**
- 背景海报 (模糊)
- 标题
- 当前播放进度 (第X集)
- 类型标签 (剧情 爱情)
- 地区 (中国大陆 中国香港)
- 媒体库名称
- 简介 (可展开)
- 评分 (如 8.7)
- 季列表卡片:
  - 海报图片
  - 季名称 (第1季)
  - 集数和年份 (共30集·2023)
- IMDB链接

**对应API:**
- `GET /v/api/v1/item/{tv_guid}` - TV详情
- `GET /v/api/v1/season/list/{tv_guid}` - 季列表
- `GET /v/api/v1/stream/list/{tv_guid}` - 流信息
- `POST /v/api/v1/play/info` - 播放信息

---

### 6. 季详情页 (`/v/tv/season/{season_guid}`)

**页面内容:**
- 背景海报 (模糊)
- 电视剧标题
- 当前播放进度 (第X集)
- 评分 + 年份 + 类型 + 地区
- 简介 (可展开"更多")
- 剧集列表:
  - 剧集海报/缩略图
  - 集数和标题 (第1集. 阿宝被撞引起轩然大波)
  - 剧集简介
  - 时长 (46分钟46秒)
- 演职人员列表:
  - 头像
  - 姓名
  - 角色 (饰演 XXX)
- IMDB链接

**对应API:**
- `GET /v/api/v1/item/{season_guid}` - 季详情
- `GET /v/api/v1/episode/list/{season_guid}` - 剧集列表
- `GET /v/api/v1/person/list/{season_guid}` - 演职人员
- `GET /v/api/v1/stream/list/{season_guid}` - 流信息
- `POST /v/api/v1/play/info` - 播放信息

---

### 7. 剧集详情页 (`/v/tv/episode/{episode_guid}`)

**页面内容:**
- 背景海报 (模糊)
- 标题: 电视剧名 第X季·第X集
- 剧集标题 (阿宝被撞引起轩然大波)
- 播放按钮
- 年份
- 时长 (46分钟46秒)
- 字幕信息:
  - 当前字幕状态 (未知字幕/有字幕)
  - 字幕添加按钮
  - 搜索字幕
  - 添加NAS字幕文件
  - 添加电脑字幕文件
- 音频信息 (未知音频/音频名称)
- 分辨率选择 (1080P SDR)
- 简介
- 文件信息:
  - 文件位置 (完整路径)
  - 文件大小 (596.51 MB)
  - 文件创建日期
  - 添加日期
- 视频信息:
  - 视频: 分辨率 编码 码率·位深
  - 音频: 语言 编码 声道·采样率
  - 字幕: 语言 格式

**对应API:**
- `GET /v/api/v1/item/{episode_guid}` - 剧集详情
- `GET /v/api/v1/stream/list/{episode_guid}` - 流信息
- `POST /v/api/v1/play/info` - 播放信息

---

### 8. 电影详情页 (`/v/movie/{movie_guid}`)

**页面内容:**
- 背景海报 (模糊)
- 版本标签 (如: 湖南卫视版)
- 播放按钮
- 评分 (8.0分)
- 分级 (TV-PG)
- 年份 (2018)
- 类型 (剧情 爱情)
- 地区 (中国大陆 加拿大)
- 媒体库名称
- 字幕信息:
  - 当前字幕状态
  - 字幕添加按钮
- 简介
- 演职人员列表:
  - 导演
  - 演员 (头像+姓名+角色)
  - 编剧
- 文件信息:
  - 文件位置
  - 文件大小
  - 文件创建日期
  - 添加日期
- IMDB链接

**对应API:**
- `GET /v/api/v1/item/{movie_guid}` - 电影详情
- `GET /v/api/v1/person/list/{movie_guid}` - 演职人员
- `GET /v/api/v1/stream/list/{movie_guid}` - 流信息
- `POST /v/api/v1/play/info` - 播放信息

---

### 9. 播放器页面 (`/v/video/{item_guid}?media_guid={media_guid}`)

**页面内容:**
- 全屏视频播放器
- 播放控制栏:
  - 暂停/播放按钮
  - 后退10秒按钮
  - 前进10秒按钮
  - 下一集按钮
  - 当前时间/总时长
  - 进度条 (可拖动)
  - 画中画按钮
  - 宽高比按钮
  - 音量控制
  - 画质选择
  - 设置按钮 (字幕/音轨/倍速等)
  - 全屏按钮

**播放器设置面板:**
- 选集列表
- 字幕选择
- 音轨选择
- 倍速选择 (0.5x, 0.75x, 1x, 1.25x, 1.5x, 2x)
- 画质选择 (原画/1080P/720P等)

**对应API:**
- `POST /v/api/v1/play/info` - 播放信息
- `POST /v/api/v1/stream` - 流详情
- `GET /v/api/v1/episode/list/{season_guid}` - 剧集列表(选集)
- `POST /v/api/v1/play/record` - 记录播放进度
- `GET /v/api/v1/media/range/{media_guid}` - 视频直链

---

## 📊 API字段映射

### 媒体卡片字段
| 显示内容 | API字段 | 说明 |
|---------|---------|------|
| 海报 | `poster` / `posters` | 海报图片路径 |
| 评分 | `vote_average` | 字符串格式 |
| 标题 | `title` / `tv_title` | 标题 |
| 年份 | `air_date` | 取年份部分 |
| 集数 | `number_of_episodes` | 总集数 |
| 季数 | `number_of_seasons` | 总季数 |
| 类型 | `type` | Movie/TV/Episode |

### 详情页字段
| 显示内容 | API字段 | 说明 |
|---------|---------|------|
| 简介 | `overview` | 内容简介 |
| 时长 | `duration` / `runtime` | 秒/分钟 |
| 地区 | `origin_country` | 制作地区 |
| 类型 | `genres` | 类型标签 |
| 分级 | `content_rating` | 内容分级 |
| 播放进度 | `ts` | 播放时间戳(秒) |
| 是否收藏 | `is_favorite` | 1/0 |
| 是否已看 | `is_watched` | 1/0 |

### 文件信息字段
| 显示内容 | API字段 | 说明 |
|---------|---------|------|
| 文件位置 | `path` | 完整文件路径 |
| 文件大小 | `size` | 字节数 |
| 创建日期 | `file_birth_time` | 时间戳 |
| 添加日期 | `create_time` | 时间戳 |

### 视频信息字段
| 显示内容 | API字段 | 说明 |
|---------|---------|------|
| 分辨率 | `resolution_type` | 1080P/4K等 |
| 编码 | `codec_name` | H264/H265等 |
| 码率 | `bps` | 比特率 |
| 位深 | `bit_depth` | 8/10 bit |
| HDR | `color_range_type` | SDR/HDR |

### 音频信息字段
| 显示内容 | API字段 | 说明 |
|---------|---------|------|
| 语言 | `language` | 音频语言 |
| 编码 | `codec_name` | AAC/DTS等 |
| 声道 | `channel_layout` | stereo/5.1等 |
| 采样率 | `sample_rate` | Hz |

### 字幕信息字段
| 显示内容 | API字段 | 说明 |
|---------|---------|------|
| 语言 | `language` | 字幕语言 |
| 格式 | `format` | SRT/ASS等 |
| 是否外挂 | `is_external` | 1/0 |

---

## 🔄 Android App 对应实现

### 页面映射
| Web页面 | Android Activity | 状态 |
|---------|-----------------|------|
| 首页 | MainActivity | ✅ 已实现 |
| 收藏页 | FavoriteActivity | ❌ 待实现 |
| 媒体库页 | MainActivity (Tab) | ✅ 已实现 |
| 分类列表页 | CategoryActivity | ❌ 待实现 |
| TV详情页 | MediaDetailActivity | ✅ 已实现 |
| 季详情页 | SeasonDetailActivity | ✅ 已实现 |
| 剧集详情页 | EpisodeDetailActivity | ❌ 待实现 |
| 电影详情页 | MovieDetailActivity | ❌ 待实现 |
| 播放器页 | VideoPlayerActivity | ✅ 已实现 |

### 待优化功能
1. **收藏功能** - 添加收藏页面和收藏操作
2. **分类筛选** - 添加分类列表页面
3. **剧集详情** - 独立的剧集详情页面
4. **电影详情** - 完善电影详情页面
5. **字幕管理** - 字幕搜索和添加功能
6. **演职人员** - 显示演职人员列表
7. **文件信息** - 显示详细文件信息
8. **视频信息** - 显示视频/音频/字幕技术信息

---

## 📱 UI组件对照

### 卡片组件
```
Web卡片样式:
┌─────────────┐
│   海报图片   │
│             │
├─────────────┤
│ 7.6 标题    │
│ 2023        │
└─────────────┘

App卡片样式:
┌─────────────┐
│   海报图片   │
│   [评分]    │
├─────────────┤
│ 标题        │
│ 年份/集数   │
└─────────────┘
```

### 详情页布局
```
Web详情页:
┌────────────────────────────────┐
│ [背景海报模糊]                  │
│ ┌──────┐                       │
│ │ 海报 │ 标题                  │
│ │      │ 评分 | 年份 | 类型    │
│ │      │ 简介...               │
│ └──────┘                       │
├────────────────────────────────┤
│ 剧集列表 / 季列表               │
├────────────────────────────────┤
│ 演职人员                        │
├────────────────────────────────┤
│ 文件信息                        │
└────────────────────────────────┘
```

---

## ✅ 实现检查清单

### 首页
- [x] 继续观看列表
- [x] 媒体库列表
- [x] 媒体卡片展示
- [ ] 卡片评分显示
- [ ] 卡片进度显示

### 详情页
- [x] 基本信息展示
- [x] 简介展示
- [ ] 评分展示
- [ ] 类型/地区标签
- [ ] 演职人员列表
- [ ] 文件信息展示
- [ ] 视频信息展示
- [ ] 字幕管理功能

### 播放器
- [x] 视频播放
- [x] 进度条
- [x] 选集功能
- [ ] 画质选择
- [ ] 字幕选择
- [ ] 音轨选择
- [ ] 倍速播放
- [ ] 播放进度记录
